- name: Download & Install SLSA Verifier
  run: |
    # 1. Detect architecture
    ARCH=$(uname -m)
    case "$ARCH" in
      x86_64)   ASSET="slsa-verifier_linux_x86_64.tar.gz" ;;
      aarch64)  ASSET="slsa-verifier_linux_arm64.tar.gz" ;;
      *)        echo "Unsupported runner arch: $ARCH"; exit 1 ;;
    esac

    # 2. Download the matching asset
    RELEASE="https://github.com/slsa-framework/slsa-verifier/releases/latest/download"
    URL="$RELEASE/$ASSET"
    echo "Fetching $URL"
    curl -sSL "$URL" -o verifier.tar.gz

    # 3. Extract and install
    tar -xzf verifier.tar.gz slsa-verifier
    chmod +x slsa-verifier
    sudo mv slsa-verifier /usr/local/bin/

    # 4. Verify itâ€™s on PATH
    echo "Installed at: $(which slsa-verifier)"
    slsa-verifier --version